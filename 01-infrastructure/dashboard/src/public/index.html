<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PI5 Dashboard">
    <meta name="theme-color" content="#3b82f6">
    <meta name="description" content="Real-time monitoring dashboard for n8n workflows on Raspberry Pi 5">

    <title>PI5 Dashboard - Workflow Monitoring</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512.png">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Socket.io -->
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>ðŸš€ PI5 Dashboard</h1>
                <div class="header-stats">
                    <span class="stat">
                        <span class="label">ConnectÃ©s:</span>
                        <span class="value" id="clients-count">0</span>
                    </span>
                    <span class="stat">
                        <span class="label">Notifications:</span>
                        <span class="value" id="notif-count">0</span>
                    </span>
                    <span class="stat">
                        <span class="label">Status:</span>
                        <span class="value status" id="connection-status">Connexion...</span>
                    </span>
                </div>
                <button id="clear-btn" class="btn btn-danger">Effacer tout</button>
            </div>
        </header>

        <!-- Filters -->
        <div class="filters">
            <button class="filter-btn active" data-filter="all">Tous</button>
            <button class="filter-btn" data-filter="success">SuccÃ¨s</button>
            <button class="filter-btn" data-filter="error">Erreurs</button>
            <button class="filter-btn" data-filter="pending">En attente</button>
        </div>

        <!-- Notifications List -->
        <div class="notifications" id="notifications-container">
            <div class="empty-state">
                <p>ðŸ”” En attente de notifications...</p>
                <small>Les workflows n8n apparaÃ®tront ici en temps rÃ©el</small>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
    <script src="/js/quick-actions.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('âœ… Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('âŒ Service Worker registration failed:', error);
                    });
            });
        }

        // Prompt for installation (iOS/Android)
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('ðŸ’¾ PWA install prompt available');
            // You can show a custom install button here
        });
    </script>
</body>
</html>
